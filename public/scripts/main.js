(function(){function r(e,n,t){function o(i,f){if(!n[i]){if(!e[i]){var c="function"==typeof require&&require;if(!f&&c)return c(i,!0);if(u)return u(i,!0);var a=new Error("Cannot find module '"+i+"'");throw a.code="MODULE_NOT_FOUND",a}var p=n[i]={exports:{}};e[i][0].call(p.exports,function(r){var n=e[i][1][r];return o(n||r)},p,p.exports,r,e,n,t)}return n[i].exports}for(var u="function"==typeof require&&require,i=0;i<t.length;i++)o(t[i]);return o}return r})()({1:[function(require,module,exports){
'use strict';

var app = {};

app.columns = {
  a: [],
  b: [],
  c: [],
  d: [],
  e: [],
  f: [],
  g: [],
  h: [], // h, i, and j are extra columns used solely for checkWin functions.
  i: [],
  j: []
};
app.nextTurn = ['red'];

app.addPiece = function () {
  $('.column').on('click', function () {
    var index = $(this).data("column");
    var selectedColumn = app.columns['' + index];
    if (selectedColumn.length === 6) {
      alert('Invalid move!');
    } else if (selectedColumn.length < 6) {
      var color = app.nextTurn[app.nextTurn.length - 1];
      var cellNum = selectedColumn.length + 1;
      var i = Object.values(app.columns);
      var x = $(this).data("array");
      var y = cellNum - 1;
      $('.column-' + index + ' .cell-' + cellNum).append('<div class="piece ' + color + ' animated fadeInDownBig faster"></div>');
      selectedColumn.push('' + color);
      app.changeTurn();
      app.checkForWin(i, x, y, color);
    }
  });
};

app.changeTurn = function () {
  var currentColor = app.nextTurn[app.nextTurn.length - 1];
  if (currentColor === 'red') {
    app.nextTurn.push('yellow');
    $('.turn-indicator').text('Yellow');
  } else if (currentColor === 'yellow') {
    app.nextTurn.push('red');
    $('.turn-indicator').text('Red');
  }
};

app.checkForWin = function (i, x, y, color) {
  app.checkForVerticalWin(i, x, y, color);
  app.checkForHorizontalWin(i, x, y, color);
  app.checkForDiagonalWin(i, x, y, color);
  app.checkForOtherWins(i, x, y, color);
};

app.checkForVerticalWin = function (i, x, y, color) {
  if (i[x][y] === i[x][y - 1] && i[x][y] === i[x][y - 2] && i[x][y] === i[x][y - 3]) {
    app.alertWin(color);
  }
};

app.checkForDiagonalWin = function (i, x, y, color) {
  if (
  // DIAGONAL WINS (TOP-LEFT TO BOTTOM-RIGHT = TL-BR, BOTTOM-LEFT TO TOP-RIGHT = BL-TR) (POS */4 = LEFT-TO-RIGHT)
  i[x][y] === i[x + 3][y - 3] && i[x][y] === i[x + 2][y - 2] && i[x][y] === i[x + 1][y - 1] || // TL-BR POS 1/4
  i[x][y] === i[x + 2][y - 2] && i[x][y] === i[x + 1][y - 1] && i[x][y] === i[x - 1][y + 1] || // TL-BR POS 2/4
  i[x][y] === i[x + 1][y - 1] && i[x][y] === i[x - 1][y + 1] && i[x][y] === i[x - 2][y + 2] || // TL-BR POS 3/4
  i[x][y] === i[x + 3][y + 3] && i[x][y] === i[x + 2][y + 2] && i[x][y] === i[x + 1][y + 1] || // BL-TR POS 1/4
  i[x][y] === i[x + 2][y + 2] && i[x][y] === i[x + 1][y + 1] && i[x][y] === i[x - 1][y - 1] || // BL-TR POS 2/4
  i[x][y] === i[x + 1][y + 1] && i[x][y] === i[x - 1][y - 1] && i[x][y] === i[x - 2][y - 2] // BL-TR POS 3/4
  ) {
      app.alertWin(color);
    }
};

app.checkForHorizontalWin = function (i, x, y, color) {
  if (i[x][y] === i[x + 3][y] && i[x][y] === i[x + 2][y] && i[x][y] === i[x + 1][y] || i[x][y] === i[x + 2][y] && i[x][y] === i[x + 1][y] && i[x][y] === i[x - 1][y] || i[x][y] === i[x + 1][y] && i[x][y] === i[x - 1][y] && i[x][y] === i[x - 2][y]) {
    app.alertWin(color);
  }
};

app.checkForOtherWins = function (i, x, y, color) {
  if (i[x][y] === i[x - 1][y + 1] && i[x][y] === i[x - 2][y + 2] && i[x][y] === i[x - 3][y + 3] || // TL-BR POS 4/4
  i[x][y] === i[x - 1][y - 1] && i[x][y] === i[x - 2][y - 2] && i[x][y] === i[x - 3][y - 3] || // BL-TR POS 4/4
  i[x][y] === i[x - 1][y] && i[x][y] === i[x - 2][y] && i[x][y] === i[x - 3][y] // HORIZONTAL WIN WITH NEGATIVE X-VALUE
  ) {
      app.alertWin(color);
    }
};

app.alertWin = function (color) {
  color = color.charAt(0).toUpperCase() + color.slice(1);
  window.setTimeout(function () {
    swal({
      title: 'Congratulations ' + color + ' player!',
      text: 'Winner winner chicken dinner \uD83C\uDF57\uD83C\uDF57\uD83C\uDF57'
    });
  }, 650);
};

// EVENT LISTENERS

$('.column').hover(function () {
  $(this).toggleClass('mouseover');
});

$('.instructions-images-carousel').flickity({
  cellAlign: 'left',
  contain: true
});

$('.instructions-button').on('click', function () {
  $('.instructions-pop-out-container').show();
});

$('.instructions-exit').on('click', function () {
  $('.instructions-pop-out-container').hide();
});

// INIT

app.init = function () {
  app.addPiece();
};

// DOCUMENT READY
$(function () {
  app.init();
});

},{}]},{},[1])
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIm5vZGVfbW9kdWxlcy9icm93c2VyLXBhY2svX3ByZWx1ZGUuanMiLCJkZXYvc2NyaXB0cy9tYWluLmpzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBOzs7QUNBQSxJQUFNLE1BQU0sRUFBWjs7QUFFQSxJQUFJLE9BQUosR0FBYztBQUNaLEtBQUcsRUFEUztBQUVaLEtBQUcsRUFGUztBQUdaLEtBQUcsRUFIUztBQUlaLEtBQUcsRUFKUztBQUtaLEtBQUcsRUFMUztBQU1aLEtBQUcsRUFOUztBQU9aLEtBQUcsRUFQUztBQVFaLEtBQUcsRUFSUyxFQVFMO0FBQ1AsS0FBRyxFQVRTO0FBVVosS0FBRztBQVZTLENBQWQ7QUFZQSxJQUFJLFFBQUosR0FBZSxDQUFDLEtBQUQsQ0FBZjs7QUFFQSxJQUFJLFFBQUosR0FBZSxZQUFXO0FBQ3hCLElBQUUsU0FBRixFQUFhLEVBQWIsQ0FBZ0IsT0FBaEIsRUFBeUIsWUFBWTtBQUNuQyxRQUFNLFFBQVEsRUFBRSxJQUFGLEVBQVEsSUFBUixDQUFhLFFBQWIsQ0FBZDtBQUNBLFFBQU0saUJBQWlCLElBQUksT0FBSixNQUFlLEtBQWYsQ0FBdkI7QUFDQSxRQUFJLGVBQWUsTUFBZixLQUEwQixDQUE5QixFQUFpQztBQUMvQixZQUFNLGVBQU47QUFDRCxLQUZELE1BRU8sSUFBSSxlQUFlLE1BQWYsR0FBd0IsQ0FBNUIsRUFBK0I7QUFDcEMsVUFBTSxRQUFRLElBQUksUUFBSixDQUFhLElBQUksUUFBSixDQUFhLE1BQWIsR0FBc0IsQ0FBbkMsQ0FBZDtBQUNBLFVBQU0sVUFBVSxlQUFlLE1BQWYsR0FBd0IsQ0FBeEM7QUFDQSxVQUFNLElBQUksT0FBTyxNQUFQLENBQWMsSUFBSSxPQUFsQixDQUFWO0FBQ0EsVUFBTSxJQUFJLEVBQUUsSUFBRixFQUFRLElBQVIsQ0FBYSxPQUFiLENBQVY7QUFDQSxVQUFNLElBQUksVUFBVSxDQUFwQjtBQUNBLHFCQUFhLEtBQWIsZUFBNEIsT0FBNUIsRUFBdUMsTUFBdkMsd0JBQW1FLEtB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LEVBQUUsWUFBVztBQUNYLE1BQUksSUFBSjtBQUNELENBRkQiLCJmaWxlIjoiZ2VuZXJhdGVkLmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXNDb250ZW50IjpbIihmdW5jdGlvbigpe2Z1bmN0aW9uIHIoZSxuLHQpe2Z1bmN0aW9uIG8oaSxmKXtpZighbltpXSl7aWYoIWVbaV0pe3ZhciBjPVwiZnVuY3Rpb25cIj09dHlwZW9mIHJlcXVpcmUmJnJlcXVpcmU7aWYoIWYmJmMpcmV0dXJuIGMoaSwhMCk7aWYodSlyZXR1cm4gdShpLCEwKTt2YXIgYT1uZXcgRXJyb3IoXCJDYW5ub3QgZmluZCBtb2R1bGUgJ1wiK2krXCInXCIpO3Rocm93IGEuY29kZT1cIk1PRFVMRV9OT1RfRk9VTkRcIixhfXZhciBwPW5baV09e2V4cG9ydHM6e319O2VbaV1bMF0uY2FsbChwLmV4cG9ydHMsZnVuY3Rpb24ocil7dmFyIG49ZVtpXVsxXVtyXTtyZXR1cm4gbyhufHxyKX0scCxwLmV4cG9ydHMscixlLG4sdCl9cmV0dXJuIG5baV0uZXhwb3J0c31mb3IodmFyIHU9XCJmdW5jdGlvblwiPT10eXBlb2YgcmVxdWlyZSYmcmVxdWlyZSxpPTA7aTx0Lmxlbmd0aDtpKyspbyh0W2ldKTtyZXR1cm4gb31yZXR1cm4gcn0pKCkiLCJjb25zdCBhcHAgPSB7fTtcblxuYXBwLmNvbHVtbnMgPSB7XG4gIGE6IFtdLFxuICBiOiBbXSxcbiAgYzogW10sXG4gIGQ6IFtdLFxuICBlOiBbXSxcbiAgZjogW10sXG4gIGc6IFtdLFxuICBoOiBbXSwgLy8gaCwgaSwgYW5kIGogYXJlIGV4dHJhIGNvbHVtbnMgdXNlZCBzb2xlbHkgZm9yIGNoZWNrV2luIGZ1bmN0aW9ucy5cbiAgaTogW10sXG4gIGo6IFtdXG59XG5hcHAubmV4dFR1cm4gPSBbJ3JlZCddO1xuXG5hcHAuYWRkUGllY2UgPSBmdW5jdGlvbigpIHtcbiAgJCgnLmNvbHVtbicpLm9uKCdjbGljaycsIGZ1bmN0aW9uICgpIHtcbiAgICBjb25zdCBpbmRleCA9ICQodGhpcykuZGF0YShcImNvbHVtblwiKTtcbiAgICBjb25zdCBzZWxlY3RlZENvbHVtbiA9IGFwcC5jb2x1bW5zW2Ake2luZGV4fWBdO1xuICAgIGlmIChzZWxlY3RlZENvbHVtbi5sZW5ndGggPT09IDYpIHtcbiAgICAgIGFsZXJ0KCdJbnZhbGlkIG1vdmUhJyk7XG4gICAgfSBlbHNlIGlmIChzZWxlY3RlZENvbHVtbi5sZW5ndGggPCA2KSB7XG4gICAgICBjb25zdCBjb2xvciA9IGFwcC5uZXh0VHVyblthcHAubmV4dFR1cm4ubGVuZ3RoIC0gMV07XG4gICAgICBjb25zdCBjZWxsTnVtID0gc2VsZWN0ZWRDb2x1bW4ubGVuZ3RoICsgMTtcbiAgICAgIGNvbnN0IGkgPSBPYmplY3QudmFsdWVzKGFwcC5jb2x1bW5zKTtcbiAgICAgIGNvbnN0IHggPSAkKHRoaXMpLmRhdGEoXCJhcnJheVwiKTtcbiAgICAgIGNvbnN0IHkgPSBjZWxsTnVtIC0gMTtcbiAgICAgICQoYC5jb2x1bW4tJHtpbmRleH0gLmNlbGwtJHtjZWxsTnVtfWApLmFwcGVuZChgPGRpdiBjbGFzcz1cInBpZWNlICR7Y29sb3J9IGFuaW1hdGVkIGZhZGVJbkRvd25CaWcgZmFzdGVyXCI+PC9kaXY+YCk7XG4gICAgICBzZWxlY3RlZENvbHVtbi5wdXNoKGAke2NvbG9yfWApO1xuICAgICAgYXBwLmNoYW5nZVR1cm4oKTtcbiAgICAgIGFwcC5jaGVja0ZvcldpbihpLCB4LCB5LCBjb2xvcik7XG4gICAgfVxuICB9KTtcbn1cblxuYXBwLmNoYW5nZVR1cm4gPSBmdW5jdGlvbigpIHtcbiAgY29uc3QgY3VycmVudENvbG9yID0gYXBwLm5leHRUdXJuW2FwcC5uZXh0VHVybi5sZW5ndGggLSAxXTtcbiAgaWYgKGN1cnJlbnRDb2xvciA9PT0gJ3JlZCcpIHtcbiAgICBhcHAubmV4dFR1cm4ucHVzaCgneWVsbG93Jyk7XG4gICAgJCgnLnR1cm4taW5kaWNhdG9yJykudGV4dChgWWVsbG93YCk7XG4gIH0gZWxzZSBpZiAoY3VycmVudENvbG9yID09PSAneWVsbG93Jykge1xuICAgIGFwcC5uZXh0VHVybi5wdXNoKCdyZWQnKTtcbiAgICAkKCcudHVybi1pbmRpY2F0b3InKS50ZXh0KGBSZWRgKTtcbiAgfVxufTtcblxuYXBwLmNoZWNrRm9yV2luID0gZnVuY3Rpb24oaSwgeCwgeSwgY29sb3IpIHtcbiAgYXBwLmNoZWNrRm9yVmVydGljYWxXaW4oaSwgeCwgeSwgY29sb3IpO1xuICBhcHAuY2hlY2tGb3JIb3Jpem9udGFsV2luKGksIHgsIHksIGNvbG9yKTtcbiAgYXBwLmNoZWNrRm9yRGlhZ29uYWxXaW4oaSwgeCwgeSwgY29sb3IpO1xuICBhcHAuY2hlY2tGb3JPdGhlcldpbnMoaSwgeCwgeSwgY29sb3IpO1xufVxuXG5hcHAuY2hlY2tGb3JWZXJ0aWNhbFdpbiA9IGZ1bmN0aW9uKGksIHgsIHksIGNvbG9yKSB7XG4gIGlmIChpW3hdW3ldID09PSBpW3hdW3kgLSAxXSAmJiBpW3hdW3ldID09PSBpW3hdW3kgLSAyXSAmJiBpW3hdW3ldID09PSBpW3hdW3kgLSAzXSkge1xuICAgIGFwcC5hbGVydFdpbihjb2xvcik7XG4gIH1cbn1cblxuYXBwLmNoZWNrRm9yRGlhZ29uYWxXaW4gPSBmdW5jdGlvbihpLCB4LCB5LCBjb2xvcikge1xuICBpZiAoXG4gICAgLy8gRElBR09OQUwgV0lOUyAoVE9QLUxFRlQgVE8gQk9UVE9NLVJJR0hUID0gVEwtQlIsIEJPVFRPTS1MRUZUIFRPIFRPUC1SSUdIVCA9IEJMLVRSKSAoUE9TICovNCA9IExFRlQtVE8tUklHSFQpXG4gICAgKGlbeF1beV0gPT09IGlbeCArIDNdW3kgLSAzXSAmJiBpW3hdW3ldID09PSBpW3ggKyAyXVt5IC0gMl0gJiYgaVt4XVt5XSA9PT0gaVt4ICsgMV1beSAtIDFdKSB8fCAvLyBUTC1CUiBQT1MgMS80XG4gICAgKGlbeF1beV0gPT09IGlbeCArIDJdW3kgLSAyXSAmJiBpW3hdW3ldID09PSBpW3ggKyAxXVt5IC0gMV0gJiYgaVt4XVt5XSA9PT0gaVt4IC0gMV1beSArIDFdKSB8fCAvLyBUTC1CUiBQT1MgMi80XG4gICAgKGlbeF1beV0gPT09IGlbeCArIDFdW3kgLSAxXSAmJiBpW3hdW3ldID09PSBpW3ggLSAxXVt5ICsgMV0gJiYgaVt4XVt5XSA9PT0gaVt4IC0gMl1beSArIDJdKSB8fCAvLyBUTC1CUiBQT1MgMy80XG4gICAgKGlbeF1beV0gPT09IGlbeCArIDNdW3kgKyAzXSAmJiBpW3hdW3ldID09PSBpW3ggKyAyXVt5ICsgMl0gJiYgaVt4XVt5XSA9PT0gaVt4ICsgMV1beSArIDFdKSB8fCAvLyBCTC1UUiBQT1MgMS80XG4gICAgKGlbeF1beV0gPT09IGlbeCArIDJdW3kgKyAyXSAmJiBpW3hdW3ldID09PSBpW3ggKyAxXVt5ICsgMV0gJiYgaVt4XVt5XSA9PT0gaVt4IC0gMV1beSAtIDFdKSB8fCAvLyBCTC1UUiBQT1MgMi80XG4gICAgKGlbeF1beV0gPT09IGlbeCArIDFdW3kgKyAxXSAmJiBpW3hdW3ldID09PSBpW3ggLSAxXVt5IC0gMV0gJiYgaVt4XVt5XSA9PT0gaVt4IC0gMl1beSAtIDJdKSAgICAvLyBCTC1UUiBQT1MgMy80XG4gICAgKSB7XG4gICAgYXBwLmFsZXJ0V2luKGNvbG9yKTtcbiAgfVxufVxuXG5hcHAuY2hlY2tGb3JIb3Jpem9udGFsV2luID0gZnVuY3Rpb24oaSwgeCwgeSwgY29sb3IpIHtcbiAgaWYgKFxuICAgIChpW3hdW3ldID09PSBpW3ggKyAzXVt5XSAmJiBpW3hdW3ldID09PSBpW3ggKyAyXVt5XSAmJiBpW3hdW3ldID09PSBpW3ggKyAxXVt5XSkgfHxcbiAgICAoaVt4XVt5XSA9PT0gaVt4ICsgMl1beV0gJiYgaVt4XVt5XSA9PT0gaVt4ICsgMV1beV0gJiYgaVt4XVt5XSA9PT0gaVt4IC0gMV1beV0pIHx8XG4gICAgKGlbeF1beV0gPT09IGlbeCArIDFdW3ldICYmIGlbeF1beV0gPT09IGlbeCAtIDFdW3ldICYmIGlbeF1beV0gPT09IGlbeCAtIDJdW3ldKSBcbiAgICApIHtcbiAgICAgIGFwcC5hbGVydFdpbihjb2xvcik7XG4gICAgfVxuICB9XG5cbmFwcC5jaGVja0Zvck90aGVyV2lucyA9IGZ1bmN0aW9uKGksIHgsIHksIGNvbG9yKSB7XG4gIGlmIChcbiAgICAoaVt4XVt5XSA9PT0gaVt4IC0gMV1beSArIDFdICYmIGlbeF1beV0gPT09IGlbeCAtIDJdW3kgKyAyXSAmJiBpW3hdW3ldID09PSBpW3ggLSAzXVt5ICsgM10pIHx8IC8vIFRMLUJSIFBPUyA0LzRcbiAgICAoaVt4XVt5XSA9PT0gaVt4IC0gMV1beSAtIDFdICYmIGlbeF1beV0gPT09IGlbeCAtIDJdW3kgLSAyXSAmJiBpW3hdW3ldID09PSBpW3ggLSAzXVt5IC0gM10pIHx8IC8vIEJMLVRSIFBPUyA0LzRcbiAgICAoaVt4XVt5XSA9PT0gaVt4IC0gMV1beV0gJiYgaVt4XVt5XSA9PT0gaVt4IC0gMl1beV0gJiYgaVt4XVt5XSA9PT0gaVt4IC0gM11beV0pIC8vIEhPUklaT05UQUwgV0lOIFdJVEggTkVHQVRJVkUgWC1WQUxVRVxuICAgICkge1xuICAgIGFwcC5hbGVydFdpbihjb2xvcik7XG4gIH1cbn1cblxuYXBwLmFsZXJ0V2luID0gZnVuY3Rpb24oY29sb3IpIHtcbiAgY29sb3IgPSBjb2xvci5jaGFyQXQoMCkudG9VcHBlckNhc2UoKSArIGNvbG9yLnNsaWNlKDEpO1xuICB3aW5kb3cuc2V0VGltZW91dChmdW5jdGlvbigpIHtcbiAgICBzd2FsKHtcbiAgICAgIHRpdGxlOiBgQ29uZ3JhdHVsYXRpb25zICR7Y29sb3J9IHBsYXllciFgLFxuICAgICAgdGV4dDogYFdpbm5lciB3aW5uZXIgY2hpY2tlbiBkaW5uZXIg8J+Nl/CfjZfwn42XYFxuICAgIH0pO1xuICB9LCA2NTApO1xufVxuICBcbi8vIEVWRU5UIExJU1RFTkVSU1xuXG4kKCcuY29sdW1uJykuaG92ZXIoZnVuY3Rpb24oKSB7XG4gICQodGhpcykudG9nZ2xlQ2xhc3MoJ21vdXNlb3ZlcicpO1xufSk7XG5cblxuJCgnLmluc3RydWN0aW9ucy1pbWFnZXMtY2Fyb3VzZWwnKS5mbGlja2l0eSh7XG4gIGNlbGxBbGlnbjogJ2xlZnQnLFxuICBjb250YWluOiB0cnVlXG59KTtcblxuJCgnLmluc3RydWN0aW9ucy1idXR0b24nKS5vbignY2xpY2snLCBmdW5jdGlvbigpIHtcbiAgJCgnLmluc3RydWN0aW9ucy1wb3Atb3V0LWNvbnRhaW5lcicpLnNob3coKTtcbn0pXG5cbiQoJy5pbnN0cnVjdGlvbnMtZXhpdCcpLm9uKCdjbGljaycsIGZ1bmN0aW9uKCkge1xuICAkKCcuaW5zdHJ1Y3Rpb25zLXBvcC1vdXQtY29udGFpbmVyJykuaGlkZSgpO1xufSlcblxuXG4vLyBJTklUXG5cbmFwcC5pbml0ID0gZnVuY3Rpb24oKSB7XG4gIGFwcC5hZGRQaWVjZSgpO1xufVxuXG5cbi8vIERPQ1VNRU5UIFJFQURZXG4kKGZ1bmN0aW9uKCkge1xuICBhcHAuaW5pdCgpO1xufSkiXX0=
